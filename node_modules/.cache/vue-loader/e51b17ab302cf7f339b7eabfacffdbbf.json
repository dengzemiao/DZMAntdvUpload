{"remainingRequest":"/Users/dengzemiao/Desktop/share/upload-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dengzemiao/Desktop/share/upload-demo/src/components/Upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dengzemiao/Desktop/share/upload-demo/src/components/Upload.vue","mtime":1614250944947},{"path":"/Users/dengzemiao/Desktop/share/upload-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/share/upload-demo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dengzemiao/Desktop/share/upload-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/share/upload-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g5Y6f55Sf5bGe5oCnIC0gYS11cGxvYWQg6Ieq5bim5bGe5oCn5omp5bGVID09PT09PT09CgogICAgLy8g5o6l5Y+X5LiK5Lyg55qE5paH5Lu257G75Z6LIAogICAgLy8g5Y+C6ICD5Zyw5Z2A77yaaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0L2ZpbGUjdW5pcXVlX2ZpbGVfdHlwZV9zcGVjaWZpZXJzCiAgICBhY2NlcHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAoKSA9PiB1bmRlZmluZWQKICAgIH0sCiAgICAvLyDlt7Lnu4/kuIrkvKDnmoTmlofku7bliJfooajvvIjlj5fmjqfvvIkKICAgIC8vIOWIl+ihqOWtmOaUvuS+i+WtkO+8mlt7IHVpZDogJ+aWh+S7tuWUr+S4gOagh+ivhu+8jOW/heW4picsIG5hbWU6ICfmlofku7blkI3vvIzlv4XluKYnLCBzdGF0dXM6ICfkuIrkvKDnirbmgIHvvIzlv4XluKYnLCBkdXBpZDogJ+mYsuatoumHjeWkjeaWh+S7tuagh+ivhihmaWxlLmxhc3RNb2RpZmllZCnvvIzlj6/pgIknLCB1cGlkOiAn5pys6L2u5LiK5Lyg5ZSv5LiA5qCH6K+G77yM5o+Q5Lqk5pyN5Yqh5Zmo5Y+v5YmU6Zmk77yM5Y+v6YCJJ31dCiAgICAvLyDlpoLmnpzkuIrpnaLljZXkuKogSnNvbiDkuK3pnIDopoHlhbbku5boh6rnlKjlrZfmrrXlj6/ku6XpgJrov4fmi6bmiKogYmVmb3JlVXBsb2FkUHJvIOiHquihjOmZhOW4pgogICAgLy8g5paH5Lu254q25oCB77yadXBsb2FkaW5nKOS4iuS8oOS4rSnjgIFkb25lKOS4iuS8oOaIkOWKnynjgIFlcnJvcijkuIrkvKDlpLHotKUp44CBcmVtb3ZlZCjnp7vpmaTvvIzngrnlh7vnu4Tku7boh6rluKbnmoTliKDpmaTmjInpkq7kvJrooqvorr7nva7kuLrnp7vpmaTnirbmgIHvvIzpgJrluLjlj6rpnIDopoHliY3kuInnp43nirbmgIEpCiAgICBmaWxlTGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICAvLyDmmK/lkKblsZXnpLrkuIrkvKDliJfooagKICAgIHNob3dVcGxvYWRMaXN0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6ICgpID0+IHRydWUKICAgIH0sCiAgICAvLyDmmK/lkKbmlK/mjIHlpJrpgInmlofku7bvvIxpZTEwKyDmlK/mjIHjgILlvIDlkK/lkI7mjInkvY8gY3RybCDlj6/pgInmi6nlpJrkuKrmlofku7bjgIIKICAgIG11bHRpcGxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6ICgpID0+IHRydWUKICAgIH0sCiAgICAvLyDmmK/lkKbnpoHnlKgKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6ICgpID0+IGZhbHNlCiAgICB9LAogICAgLy8g5YeG5aSH5LiK5Lyg77yM5Zue6LCD6ZKp5a2Q77yM6Iul6L+U5ZueIGZhbHNlIOWImeWBnOatouS4iuS8oAogICAgLy8g57G75Z6L77yaKGZpbGUsIGZpbGVMaXN0LCBmaWxlSnNvbiwgaXNBbGxvdykgPT4gYm9vbGVhbgogICAgYmVmb3JlVXBsb2FkUHJvOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICAvLyDoh6rlrprkuYnkuIrkvKDvvIzlm57osIPpkqnlrZDvvIzlj6/ku6Xoh6rlrprkuYnoh6rlt7HnmoTkuIrkvKDlrp7njrDvvIwKICAgIC8vIOexu+Wei++8mihkYXRhLCBmaWxlSnNvbiwgKGlzU3VjY2VzcykgPT4ge30pID0+IHt9CiAgICBjdXN0b21SZXF1ZXN0UHJvOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICAvLyDngrnlh7vnp7vpmaTmlofku7bml7bnmoTlm57osIPvvIzov5Tlm57lgLzkuLogZmFsc2Ug5pe25LiN56e76ZmkCiAgICAvLyDnsbvlnovvvJooZmlsZSkgPT4gYm9vbGVhbgogICAgcmVtb3ZlUHJvOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDlhaznlKjmo4DmtYsgLSDmlofku7bph43lpI0gPT09PT09PT0KCiAgICAvLyDmlofku7bph43lpI3mo4DmtYvmqKHlvI86IDAgLT4g5YWB6K646YeN5aSN77yMMSAtPiDnpoHmraLph43lpI3mlofku7Yo5aSa6YCJ5qih5byP77ya5pys5qyh6YCJ5oup55qE5omA5pyJ5paH5Lu277yM6YeN5aSN5paH5Lu256e76Zmk77yM5LiN6YeN5aSN5paH5Lu25LiK5LygKe+8jDIgLT4g56aB5q2i6YeN5aSN5paH5Lu2KOWkmumAieaooeW8j++8muacrOasoemAieaLqeeahOaJgOacieaWh+S7tu+8jOacieS4gOS4quWtmOWcqOmHjeWkje+8jOWFqOmDqOenu+mZpCkKICAgIGZpbGVSZXBlYXRNb2RlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogKCkgPT4gMQogICAgfSwKICAgIC8vIOaWh+S7tumHjeWkjeajgOa1i+Wksei0peaPkOekugogICAgZmlsZVJlcGVhdEVycm9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogKCkgPT4gJ+S4jeiDvemHjeWkjeWvvOWFpeaWh+S7ticKICAgIH0sCiAgICAvLyDmlofku7bph43lpI3mo4DmtYvlpLHotKXmj5DnpLrvvIzlrp7njrDov5nkuKrlsIbkuI3kvb/nlKggZmlsZVJlcGVhdEVycm9yCiAgICAvLyB1cGxvYWRJZO+8muacrOasoeS4iuS8oOaTjeS9nOWUr+S4gElE77yM5aSa6YCJ5paH5Lu25qih5byP5Y+v6YCa6L+H6K+l5ZSv5LiASUTlj6rmmL7npLrkuIDmrKHplJnor68KICAgIC8vIHJlcGVhdEZpbGVzOiDph43lpI3mlofku7bliJfooagKICAgIC8vIOexu+Wei++8mihmaWxlLCBmaWxlTGlzdCwgdXBsb2FkSWQsIHJlcGVhdEZpbGVzKSA9PiB7fQogICAgZmlsZVJlcGVhdEVycm9yUHJvOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDlhaznlKjmo4DmtYsgLSDmlofku7bmlbDph4/pmZDliLYgPT09PT09PT0KCiAgICAvLyDkuIrkvKDmlofku7bmlbDph4/pmZDliLbvvJowIC0+IOS4jemZkOWItu+8jOmaj+S+v+S8oAogICAgZmlsZU51bWJlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6ICgpID0+IDIKICAgIH0sCiAgICAvLyDkuIrkvKDmlofku7bmlbDph4/pmZDliLbmo4DmtYvlpLHotKXmj5DnpLoKICAgIGZpbGVOdW1iZXJFcnJvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICflt7LotoXlh7rkuIrkvKDmlofku7bmlbDph4/pmZDliLYnCiAgICB9LAogICAgLy8g5LiK5Lyg5paH5Lu25pWw6YeP6ZmQ5Yi25aSx6LSl5o+Q56S677yM5a6e546w6L+Z5Liq5bCG5LiN5L2/55SoIGZpbGVSZXBlYXRFcnJvcgogICAgLy8gdXBsb2FkSWTvvJrmnKzmrKHkuIrkvKDmk43kvZzllK/kuIBJRO+8jOWkmumAieaWh+S7tuaooeW8j+WPr+mAmui/h+ivpeWUr+S4gElE5Y+q5pi+56S65LiA5qyh6ZSZ6K+vCiAgICAvLyBleGNlZWROdW1iZXLvvJrmnKzova7otoXlh7rnmoTmlofku7bmlbDph48KICAgIC8vIOexu+Wei++8mihmaWxlLCBmaWxlTGlzdCwgdXBsb2FkSWQsIGV4Y2VlZE51bWJlcikgPT4ge30KICAgIGZpbGVOdW1iZXJFcnJvclBybzogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g5YWs55So5qOA5rWLIC0g5paH5Lu25qOA5rWLID09PT09PT09CgogICAgLy8gKOWkmumAieaWh+S7tuaooeW8j+S4i+eUn+aViCnmlofku7bmo4DmtYvmqKHlvI/vvJowIC0+IOS4jeajgOa1i++8jDEgLT4g5pys5qyh6YCJ5oup55qE5omA5pyJ5paH5Lu277yM5qOA5rWL5aSx6LSl55qE56e76Zmk77yM5oiQ5Yqf55qE5LiK5Lyg77yMMiAtPiDmnKzmrKHpgInmi6nnmoTmiYDmnInmlofku7bvvIzmnInkuIDkuKrmo4DmtYvlpLHotKXvvIzlhajpg6jnp7vpmaQKICAgIGZpbGVDaGVja01vZGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAoKSA9PiAwCiAgICB9LAoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g5YWs55So5qOA5rWLIC0g5paH5Lu25aSn5bCPID09PT09PT09CiAgICAKICAgIC8vIOaWh+S7tuWkp+Wwj+ajgOa1i+aooeW8j++8iOWNleS9jSBrYu+8iTogMCAtPiDlhbPpl63vvIwxIC0+IOWwj+S6ju+8jDIgLT4g5aSn5LqO77yMMyAtPiDnrYnkuo7vvIzvvIwxMSAtPiDlsI/kuo7miJbnrYnkuo7vvIwyMiAtPiDlpKfkuo7miJbnrYnkuo4KICAgIGtiQ29tcGFyZU1vZGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAoKSA9PiAwCiAgICB9LAogICAgLy8g5paH5Lu25aSn5bCP77yI5Y2V5L2NIGti77yJCiAgICBrYkNvbXBhcmVTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogKCkgPT4gMAogICAgfSwKICAgIC8vIOaWh+S7tuWkp+Wwj+ajgOa1i+Wksei0peaPkOekugogICAga2JDb21wYXJlRXJyb3I6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAoKSA9PiAn5paH5Lu25aSn5bCP5LiO6K6+5a6a6IyD5Zu05LiN5Yy56YWNJwogICAgfSwKICAgIC8vIOaWh+S7tuWkp+Wwj+ajgOa1i+Wksei0peaPkOekuuWbnuiwg++8jOWunueOsOi/meS4quWwhuS4jeS9v+eUqCBrYkNvbXBhcmVFcnJvcgogICAgLy8gdXBsb2FkSWTvvJrmnKzmrKHkuIrkvKDmk43kvZzllK/kuIBJRO+8jOWkmumAieaWh+S7tuaooeW8j+WPr+mAmui/h+ivpeWUr+S4gElE5Y+q5pi+56S65LiA5qyh6ZSZ6K+vCiAgICAvLyDnsbvlnovvvJooZmlsZSwgZmlsZUxpc3QsIHVwbG9hZElkKSA9PiB7fQogICAga2JDb21wYXJlRXJyb3JQcm86IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g5Zu+54mH5qOA5p+lID09PT09PT09CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDlh4blpIfkuIrkvKAKICAgIGJlZm9yZVVwbG9hZCAoZmlsZSwgZmlsZUxpc3QpIHsKCiAgICAgIC8vIOaYr+WQpuWFgeiuuOS4iuS8oAogICAgICB2YXIgaXNPSyA9IHRydWUKICAgICAgLy8g6I635Y+W5pys5qyh5LiK5Lyg5ZSv5LiASUQKICAgICAgY29uc3QgdXBsb2FkSWQgPSB0aGlzLmdldFVwbG9hZElkKGZpbGVMaXN0KQoKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g5YWs55So5qOA5rWLIC0g5paH5Lu25pWw6YeP6ZmQ5Yi2IC0tLS0tLS0tCgogICAgICAvLyDmgLvmlofku7bmlbDph48KICAgICAgaWYgKHRoaXMuZmlsZU51bWJlciAhPT0gMCkgewogICAgICAgIC8vIOiOt+WPluacqui/m+WFpeS4iuS8oOaWh+S7tuaVsOmHjwogICAgICAgIHZhciBmaWxlTnVtYmVyID0gMAogICAgICAgIGZpbGVMaXN0LmZvckVhY2goaXRlbU9uZSA9PiB7CiAgICAgICAgICBjb25zdCBpc0V4aXN0ID0gdGhpcy5maWxlTGlzdC5zb21lKGl0ZW1Ud28gPT4gewogICAgICAgICAgICByZXR1cm4gaXRlbU9uZS5uYW1lID09PSBpdGVtVHdvLm5hbWUgJiYgaXRlbU9uZS5sYXN0TW9kaWZpZWQgPT09IGl0ZW1Ud28uZHVwaWQKICAgICAgICAgIH0pCiAgICAgICAgICBpZiAoIWlzRXhpc3QpIHsgZmlsZU51bWJlciArPSAxIH0KICAgICAgICB9KQogICAgICAgIC8vIOaWh+S7tuaAu+aVsOmHjwogICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5maWxlTGlzdC5sZW5ndGggKyBmaWxlTnVtYmVyCiAgICAgICAgLy8g5aaC5p6c5paH5Lu25oC75pWw6YeP6LaF6L+H5paH5Lu26ZmQ5Yi25pWw6YeP5YiZ5YGc5q2i5LiK5LygCiAgICAgICAgaWYgKHRvdGFsID4gdGhpcy5maWxlTnVtYmVyKSB7CiAgICAgICAgICAvLyDmnInplJnor6/lm57osIMKICAgICAgICAgIGlmICh0aGlzLmZpbGVOdW1iZXJFcnJvclBybykgewogICAgICAgICAgICAvLyDplJnor6/lm57osIMKICAgICAgICAgICAgdGhpcy5maWxlTnVtYmVyRXJyb3JQcm8oZmlsZSwgZmlsZUxpc3QsIHVwbG9hZElkLCBmaWxlTnVtYmVyKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5pyJ6ZSZ6K+v5paH5qGICiAgICAgICAgICAgIGlmICh0aGlzLmZpbGVOdW1iZXJFcnJvcikgeyB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuZmlsZU51bWJlckVycm9yKSB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyDkuI3lhYHorrjkuIrkvKAKICAgICAgICAgIGlzT0sgPSBmYWxzZQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g5YWs55So5qOA5rWLIC0g5paH5Lu26YeN5aSNIC0tLS0tLS0tCgogICAgICAvLyDliKTmlq3ph43lpI3mlofku7YKICAgICAgaWYgKHRoaXMuZmlsZVJlcGVhdE1vZGUgIT09IDApIHsKICAgICAgICAvLyDojrflj5bph43lpI3liJfooagKICAgICAgICBjb25zdCByZXBlYXRGaWxlcyA9IFtdCiAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChpdGVtT25lID0+IHsKICAgICAgICAgIHRoaXMuZmlsZUxpc3Quc29tZShpdGVtVHdvID0+IHsKICAgICAgICAgICAgLy8g5qOA5rWL5Yiw6YeN5aSN5paH5Lu2IOWQjeensOebuOWQjCAmJiDmnIDlkI7kv67mlLnml7bpl7Tnm7jlkIwgJiYg5LiK5LygSUTkuI3nm7jlkIwKICAgICAgICAgICAgY29uc3QgaXNSZXBlYXQgPSBpdGVtT25lLm5hbWUgPT09IGl0ZW1Ud28ubmFtZSAmJiBpdGVtT25lLmxhc3RNb2RpZmllZCA9PT0gaXRlbVR3by5kdXBpZCAmJiB1cGxvYWRJZCAhPT0gaXRlbVR3by51cGlkCiAgICAgICAgICAgIGlmIChpc1JlcGVhdCkgeyByZXBlYXRGaWxlcy5wdXNoKGl0ZW1PbmUpIH0KICAgICAgICAgICAgcmV0dXJuIGlzUmVwZWF0CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLy8g5qC55o2u6YeN5aSN57G75Z6L5qOA5rWLCiAgICAgICAgaWYgKHRoaXMuZmlsZVJlcGVhdE1vZGUgPT09IDEpIHsKICAgICAgICAgIC8vIOemgeatoumHjeWkjeaWh+S7tijlpJrpgInmqKHlvI/vvJrmnKzmrKHpgInmi6nnmoTmiYDmnInmlofku7bvvIzph43lpI3mlofku7bnp7vpmaTvvIzkuI3ph43lpI3mlofku7bkuIrkvKApCiAgICAgICAgICBjb25zdCBpc1JlcGVhdCA9IHRoaXMuZmlsZUxpc3Quc29tZShpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGZpbGUubmFtZSA9PT0gaXRlbS5uYW1lICYmIGZpbGUubGFzdE1vZGlmaWVkID09PSBpdGVtLmR1cGlkCiAgICAgICAgICB9KQogICAgICAgICAgLy8g5a2Y5Zyo6YeN5aSNCiAgICAgICAgICBpZiAoaXNSZXBlYXQpIHsKICAgICAgICAgICAgLy8g5pyJ6ZSZ6K+v5Zue6LCDCiAgICAgICAgICAgIGlmICh0aGlzLmZpbGVSZXBlYXRFcnJvclBybykgewogICAgICAgICAgICAgIC8vIOmUmeivr+WbnuiwgwogICAgICAgICAgICAgIHRoaXMuZmlsZVJlcGVhdEVycm9yUHJvKGZpbGUsIGZpbGVMaXN0LCB1cGxvYWRJZCwgcmVwZWF0RmlsZXMpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5pyJ6ZSZ6K+v5paH5qGICiAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsZVJlcGVhdEVycm9yKSB7IHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy5maWxlUmVwZWF0RXJyb3IpIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDkuI3lhYHorrjkuIrkvKAKICAgICAgICAgICAgaXNPSyA9ICFpc1JlcGVhdAogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5maWxlUmVwZWF0TW9kZSA9PT0gMikgewogICAgICAgICAgLy8g56aB5q2i6YeN5aSN5paH5Lu2KOWkmumAieaooeW8j++8muacrOasoemAieaLqeeahOaJgOacieaWh+S7tu+8jOacieS4gOS4quWtmOWcqOmHjeWkje+8jOWFqOmDqOenu+mZpCkKICAgICAgICAgIGNvbnN0IGlzUmVwZWF0ID0gQm9vbGVhbihyZXBlYXRGaWxlcy5sZW5ndGgpCiAgICAgICAgICAvLyDlrZjlnKjph43lpI0KICAgICAgICAgIGlmIChpc1JlcGVhdCkgewogICAgICAgICAgICAvLyDmnInplJnor6/lm57osIMKICAgICAgICAgICAgaWYgKHRoaXMuZmlsZVJlcGVhdEVycm9yUHJvKSB7CiAgICAgICAgICAgICAgLy8g6ZSZ6K+v5Zue6LCDCiAgICAgICAgICAgICAgdGhpcy5maWxlUmVwZWF0RXJyb3JQcm8oZmlsZSwgZmlsZUxpc3QsIHVwbG9hZElkLCByZXBlYXRGaWxlcykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDmnInplJnor6/mlofmoYgKICAgICAgICAgICAgICBpZiAodGhpcy5maWxlUmVwZWF0RXJyb3IpIHsgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLmZpbGVSZXBlYXRFcnJvcikgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOS4jeWFgeiuuOS4iuS8oAogICAgICAgICAgICBpc09LID0gIWlzUmVwZWF0CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDlhaznlKjmo4DmtYsgLSDmlofku7bmo4DmtYsgLS0tLS0tLS0KCiAgICAgIC8vIOaWh+S7tuajgOa1iwogICAgICBpZiAodGhpcy5maWxlQ2hlY2tNb2RlICE9PSAwICYmIGlzT0spIHsKICAgICAgICAvLyDljLnphY3mo4DmtYvmqKHlvI8KICAgICAgICBpZiAodGhpcy5maWxlQ2hlY2tNb2RlID09PSAxKSB7CiAgICAgICAgICAvLyDmnKzmrKHpgInmi6nnmoTmiYDmnInmlofku7bvvIzmo4DmtYvlpLHotKXnmoTnp7vpmaTvvIzmiJDlip/nmoTkuIrkvKAKICAgICAgICAgIGlzT0sgPSB0aGlzLmZpbGVDaGVjayhmaWxlLCBmaWxlTGlzdCwgdXBsb2FkSWQpCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZpbGVDaGVja01vZGUgPT09IDIpIHsKICAgICAgICAgIC8vIOacrOasoemAieaLqeeahOaJgOacieaWh+S7tu+8jOacieS4gOS4quajgOa1i+Wksei0pe+8jOWFqOmDqOenu+mZpAogICAgICAgICAgaXNPSyA9IGZpbGVMaXN0LmV2ZXJ5KGl0ZW0gPT4gewogICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlQ2hlY2soaXRlbSwgZmlsZUxpc3QsIHVwbG9hZElkKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIOe7hOijheaVsOaNriAtLS0tLS0tLQoKICAgICAgLy8g5paH5Lu25a+56LGhCiAgICAgIGNvbnN0IGZpbGVKc29uID0gewogICAgICAgIC8vIOWUr+S4gOagh+ivhuespgogICAgICAgIHVpZDogZmlsZS51aWQsCiAgICAgICAgLy8g5paH5Lu25ZCNCiAgICAgICAgbmFtZTogZmlsZS5uYW1lLAogICAgICAgIC8vIOaWh+S7tueKtuaAge+8mnVwbG9hZGluZyjkuIrkvKDkuK0p44CBZG9uZSjkuIrkvKDmiJDlip8p44CBZXJyb3Io5LiK5Lyg5aSx6LSlKQogICAgICAgIHN0YXR1czogJ3VwbG9hZGluZycsCiAgICAgICAgLy8g6Ziy5q2i6YeN5aSN5qCH6K+GCiAgICAgICAgZHVwaWQ6IGZpbGUubGFzdE1vZGlmaWVkLAogICAgICAgIC8vIOacrOi9ruS4iuS8oElEKOS4iuS8oOacjeWKoeWZqOWPr+WJlOmZpCkKICAgICAgICB1cGlkOiB1cGxvYWRJZAogICAgICAgIC8vIOWFtuS7luiHqueUqOWtl+auteWPr+iHquihjOmZhOW4pgogICAgICB9CgogICAgICAvLyDlpJbkvKDlm57osIMKICAgICAgaWYgKHRoaXMuYmVmb3JlVXBsb2FkUHJvKSB7CiAgICAgICAgLy8g6I635Y+W5Zue6LCD57uT5p6cCiAgICAgICAgaXNPSyA9IHRoaXMuYmVmb3JlVXBsb2FkUHJvKGZpbGUsIGZpbGVMaXN0LCBmaWxlSnNvbiwgaXNPSykgCiAgICAgIH0KCiAgICAgIC8vIOajgOafpee7k+aenAogICAgICBpZiAoaXNPSykgewogICAgICAgIC8vIOWKoOWFpeaWh+S7tuWIl+ihqAogICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaChmaWxlSnNvbikKICAgICAgfQoKICAgICAgcmV0dXJuIGlzT0sKICAgIH0sCiAgICAvLyDoh6rlrprkuYnkuIrkvKAKICAgIGN1c3RvbVJlcXVlc3QgKGRhdGEpIHsKICAgICAgLy8g5om+5Yiw5a+55bqU55qE5LiK5Lyg5paH5Lu25a+56LGhCiAgICAgIGNvbnN0IGZpbGVKc29uID0gdGhpcy5maWxlTGlzdC5maW5kKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBkYXRhLmZpbGUudWlkID09PSBpdGVtLnVpZAogICAgICB9KQogICAgICAvLyDoh6rlrprkuYnkuIrkvKDmnI3liqHlmagKICAgICAgaWYgKHRoaXMuY3VzdG9tUmVxdWVzdFBybykgewogICAgICAgIC8vIOiHquWumuS5ieivt+axgiAKICAgICAgICB0aGlzLmN1c3RvbVJlcXVlc3RQcm8oZGF0YSwgZmlsZUpzb24sIChpc1N1Y2Nlc3MpID0+IHsKICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGlzU3VjY2VzcyA/ICdkb25lJyA6ICdlcnJvcicKICAgICAgICAgIHRoaXMuY3VzdG9tUmVxdWVzdFJlc3VsdChmaWxlSnNvbiwgc3RhdHVzKQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36Ieq5bex5a6e546wIGN1c3RvbVJlcXVlc3RQcm8g6Ieq5a6a5LmJ5LiK5Lyg5pON5L2c77yBJykKICAgICAgICAvLyDkuIrkvKDlrozmiJAKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY3VzdG9tUmVxdWVzdFJlc3VsdChmaWxlSnNvbiwgJ2RvbmUnKQogICAgICAgIH0sIDIwMDApOwogICAgICB9CiAgICB9LAogICAgLy8g54K55Ye756e76Zmk5paH5Lu25pe255qE5Zue6LCDCiAgICByZW1vdmUgKGZpbGUpIHsKICAgICAgLy8g5YWB6K645Yig6ZmkCiAgICAgIHZhciBpc09LID0gdHJ1ZQogICAgICAvLyDlpJbkvKDlm57osIMKICAgICAgaWYgKHRoaXMucmVtb3ZlUHJvKSB7CiAgICAgICAgLy8g6I635Y+W5Zue6LCD57uT5p6cCiAgICAgICAgaXNPSyA9IHRoaXMucmVtb3ZlUHJvKGZpbGUpIAogICAgICB9CiAgICAgIC8vIOajgOafpee7k+aenAogICAgICBpZiAoaXNPSykgewogICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maWxlTGlzdC5pbmRleE9mKGZpbGUpCiAgICAgICAgdGhpcy5maWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIH0KICAgICAgLy8g6L+U5ZueCiAgICAgIHJldHVybiBpc09LCiAgICB9LAogICAgLy8g5paH5Lu25qOA5rWLCiAgICBmaWxlQ2hlY2sgKGZpbGUsIGZpbGVMaXN0LCB1cGxvYWRJZCkgewoKICAgICAgLy8g5qOA5rWL57uT5p6cCiAgICAgIHZhciBpc09LID0gdHJ1ZQoKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g5YWs55So5qOA5rWLIC0g5paH5Lu25aSn5bCPIC0tLS0tLS0tCiAgICAgIAogICAgICAvLyDlvIDlkK/kuoYgLSDmlofku7blpKflsI/mo4DmtYsKICAgICAgaWYgKHRoaXMua2JDb21wYXJlTW9kZSAhPT0gMCkgewogICAgICAgIC8vIOajgOa1i+e7k+aenAogICAgICAgIHZhciBpc09LID0gdHJ1ZQogICAgICAgIC8vIOiOt+WPluaWh+S7tuWkp+Wwj++8iOWNleS9je+8mmti77yJCiAgICAgICAgY29uc3QgZmlsZVNpemUgPSBmaWxlLnNpemUgLyAxMDI0CiAgICAgICAgLy8g5byA5aeL5qOA5rWLCiAgICAgICAgaWYgKHRoaXMua2JDb21wYXJlTW9kZSA9PT0gMSkgewogICAgICAgICAgLy8g5bCP5LqOCiAgICAgICAgICBpc09LID0gZmlsZVNpemUgPCB0aGlzLmtiQ29tcGFyZVNpemUKICAgICAgICB9IGVsc2UgaWYgKHRoaXMua2JDb21wYXJlTW9kZSA9PT0gMikgewogICAgICAgICAgLy8g5aSn5LqOCiAgICAgICAgICBpc09LID0gZmlsZVNpemUgPiB0aGlzLmtiQ29tcGFyZVNpemUKICAgICAgICB9IGVsc2UgaWYgKHRoaXMua2JDb21wYXJlTW9kZSA9PT0gMykgewogICAgICAgICAgLy8g562J5LqOCiAgICAgICAgICBpc09LID0gZmlsZVNpemUgPT09IHRoaXMua2JDb21wYXJlU2l6ZQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5rYkNvbXBhcmVNb2RlID09PSAxMSkgewogICAgICAgICAgLy8g5bCP5LqO562J5LqOCiAgICAgICAgICBpc09LID0gZmlsZVNpemUgPD0gdGhpcy5rYkNvbXBhcmVTaXplCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmtiQ29tcGFyZU1vZGUgPT09IDIyKSB7CiAgICAgICAgICAvLyDlpKfkuo7nrYnkuo4KICAgICAgICAgIGlzT0sgPSBmaWxlU2l6ZSA+PSB0aGlzLmtiQ29tcGFyZVNpemUKICAgICAgICB9IGVsc2Uge30KICAgICAgICAvLyDliKTmlq3mo4DmtYvnu5PmnpwKICAgICAgICBpZiAoIWlzT0spIHsKICAgICAgICAgIC8vIOaciemUmeivr+WbnuiwgwogICAgICAgICAgaWYgKHRoaXMua2JDb21wYXJlRXJyb3JQcm8pIHsKICAgICAgICAgICAgLy8g6ZSZ6K+v5Zue6LCDCiAgICAgICAgICAgIHRoaXMua2JDb21wYXJlRXJyb3JQcm8oZmlsZSwgZmlsZUxpc3QsIHVwbG9hZElkKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5pyJ6ZSZ6K+v5paH5qGICiAgICAgICAgICAgIGlmICh0aGlzLmtiQ29tcGFyZUVycm9yKSB7IHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy5rYkNvbXBhcmVFcnJvcikgfQogICAgICAgICAgfQogICAgICAgICAgLy8g5L+u5pS55qOA5rWL57uT5p6cCiAgICAgICAgICBpc09LID0gZmFsc2UKICAgICAgICAgIC8vIOi/lOWbnumUmeivr+eKtuaAgQogICAgICAgICAgcmV0dXJuIGlzT0sKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIOWbvueJh+ajgOafpSAtLS0tLS0tLQoKICAgICAgLy8g6L+U5ZueCiAgICAgIHJldHVybiBpc09LCiAgICB9LAogICAgLy8g6Ieq5a6a5LmJ5LiK5Lyg57uT5p6cCiAgICBjdXN0b21SZXF1ZXN0UmVzdWx0IChmaWxlSnNvbiwgc3RhdHVzKSB7CiAgICAgIC8vIOiuvue9ruS4iuS8oOeKtuaAgQogICAgICBmaWxlSnNvbi5zdGF0dXMgPSBzdGF0dXMKICAgIH0sCiAgICAvLyDojrflj5bmnKzmrKHkuIrkvKDllK/kuIBJRAogICAgZ2V0VXBsb2FkSWQgKGZpbGVMaXN0KSB7CiAgICAgIHZhciB1cGxvYWRJZCA9ICcnCiAgICAgIGZpbGVMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgdXBsb2FkSWQgKz0gaXRlbS51aWQKICAgICAgfSkKICAgICAgcmV0dXJuIHVwbG9hZElkCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Upload.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <!-- 主视图 -->\n  <div class=\"upload-view\">\n    <!-- 上传组件 -->\n    <a-upload\n      :accept=\"accept\"\n      :multiple=\"multiple\"\n      :disabled=\"disabled\"\n      :showUploadList=\"showUploadList\"\n      :fileList=\"fileList\"\n      :beforeUpload=\"beforeUpload\"\n      :customRequest=\"customRequest\"\n      :remove=\"remove\"\n    >\n      <!-- 自定义 -->\n      <!-- <slot></slot> -->\n      <!-- 图片上传按钮 -->\n      <a-button><a-icon type=\"upload\" />上传文件</a-button>\n    </a-upload>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n\n    // =============================== 原生属性 - a-upload 自带属性扩展 ========\n\n    // 接受上传的文件类型 \n    // 参考地址：https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers\n    accept: {\n      type: String,\n      default: () => undefined\n    },\n    // 已经上传的文件列表（受控）\n    // 列表存放例子：[{ uid: '文件唯一标识，必带', name: '文件名，必带', status: '上传状态，必带', dupid: '防止重复文件标识(file.lastModified)，可选', upid: '本轮上传唯一标识，提交服务器可剔除，可选'}]\n    // 如果上面单个 Json 中需要其他自用字段可以通过拦截 beforeUploadPro 自行附带\n    // 文件状态：uploading(上传中)、done(上传成功)、error(上传失败)、removed(移除，点击组件自带的删除按钮会被设置为移除状态，通常只需要前三种状态)\n    fileList: {\n      type: Array,\n      default: () => []\n    },\n    // 是否展示上传列表\n    showUploadList: {\n      type: Boolean,\n      default: () => true\n    },\n    // 是否支持多选文件，ie10+ 支持。开启后按住 ctrl 可选择多个文件。\n    multiple: {\n      type: Boolean,\n      default: () => true\n    },\n    // 是否禁用\n    disabled: {\n      type: Boolean,\n      default: () => false\n    },\n    // 准备上传，回调钩子，若返回 false 则停止上传\n    // 类型：(file, fileList, fileJson, isAllow) => boolean\n    beforeUploadPro: {\n      type: Function,\n      default: undefined\n    },\n    // 自定义上传，回调钩子，可以自定义自己的上传实现，\n    // 类型：(data, fileJson, (isSuccess) => {}) => {}\n    customRequestPro: {\n      type: Function,\n      default: undefined\n    },\n    // 点击移除文件时的回调，返回值为 false 时不移除\n    // 类型：(file) => boolean\n    removePro: {\n      type: Function,\n      default: undefined\n    },\n\n    // =============================== 公用检测 - 文件重复 ========\n\n    // 文件重复检测模式: 0 -> 允许重复，1 -> 禁止重复文件(多选模式：本次选择的所有文件，重复文件移除，不重复文件上传)，2 -> 禁止重复文件(多选模式：本次选择的所有文件，有一个存在重复，全部移除)\n    fileRepeatMode: {\n      type: Number,\n      default: () => 1\n    },\n    // 文件重复检测失败提示\n    fileRepeatError: {\n      type: String,\n      default: () => '不能重复导入文件'\n    },\n    // 文件重复检测失败提示，实现这个将不使用 fileRepeatError\n    // uploadId：本次上传操作唯一ID，多选文件模式可通过该唯一ID只显示一次错误\n    // repeatFiles: 重复文件列表\n    // 类型：(file, fileList, uploadId, repeatFiles) => {}\n    fileRepeatErrorPro: {\n      type: Function,\n      default: undefined\n    },\n\n    // =============================== 公用检测 - 文件数量限制 ========\n\n    // 上传文件数量限制：0 -> 不限制，随便传\n    fileNumber: {\n      type: Number,\n      default: () => 2\n    },\n    // 上传文件数量限制检测失败提示\n    fileNumberError: {\n      type: String,\n      default: () => '已超出上传文件数量限制'\n    },\n    // 上传文件数量限制失败提示，实现这个将不使用 fileRepeatError\n    // uploadId：本次上传操作唯一ID，多选文件模式可通过该唯一ID只显示一次错误\n    // exceedNumber：本轮超出的文件数量\n    // 类型：(file, fileList, uploadId, exceedNumber) => {}\n    fileNumberErrorPro: {\n      type: Function,\n      default: undefined\n    },\n\n    // =============================== 公用检测 - 文件检测 ========\n\n    // (多选文件模式下生效)文件检测模式：0 -> 不检测，1 -> 本次选择的所有文件，检测失败的移除，成功的上传，2 -> 本次选择的所有文件，有一个检测失败，全部移除\n    fileCheckMode: {\n      type: Number,\n      default: () => 0\n    },\n\n    // =============================== 公用检测 - 文件大小 ========\n    \n    // 文件大小检测模式（单位 kb）: 0 -> 关闭，1 -> 小于，2 -> 大于，3 -> 等于，，11 -> 小于或等于，22 -> 大于或等于\n    kbCompareMode: {\n      type: Number,\n      default: () => 0\n    },\n    // 文件大小（单位 kb）\n    kbCompareSize: {\n      type: Number,\n      default: () => 0\n    },\n    // 文件大小检测失败提示\n    kbCompareError: {\n      type: String,\n      default: () => '文件大小与设定范围不匹配'\n    },\n    // 文件大小检测失败提示回调，实现这个将不使用 kbCompareError\n    // uploadId：本次上传操作唯一ID，多选文件模式可通过该唯一ID只显示一次错误\n    // 类型：(file, fileList, uploadId) => {}\n    kbCompareErrorPro: {\n      type: Function,\n      default: undefined\n    }\n\n    // =============================== 图片检查 ========\n  },\n  methods: {\n    // 准备上传\n    beforeUpload (file, fileList) {\n\n      // 是否允许上传\n      var isOK = true\n      // 获取本次上传唯一ID\n      const uploadId = this.getUploadId(fileList)\n\n      // ----------------------------- 公用检测 - 文件数量限制 --------\n\n      // 总文件数量\n      if (this.fileNumber !== 0) {\n        // 获取未进入上传文件数量\n        var fileNumber = 0\n        fileList.forEach(itemOne => {\n          const isExist = this.fileList.some(itemTwo => {\n            return itemOne.name === itemTwo.name && itemOne.lastModified === itemTwo.dupid\n          })\n          if (!isExist) { fileNumber += 1 }\n        })\n        // 文件总数量\n        const total = this.fileList.length + fileNumber\n        // 如果文件总数量超过文件限制数量则停止上传\n        if (total > this.fileNumber) {\n          // 有错误回调\n          if (this.fileNumberErrorPro) {\n            // 错误回调\n            this.fileNumberErrorPro(file, fileList, uploadId, fileNumber)\n          } else {\n            // 有错误文案\n            if (this.fileNumberError) { this.$message.error(this.fileNumberError) }\n          }\n          // 不允许上传\n          isOK = false\n        }\n      }\n\n      // ----------------------------- 公用检测 - 文件重复 --------\n\n      // 判断重复文件\n      if (this.fileRepeatMode !== 0) {\n        // 获取重复列表\n        const repeatFiles = []\n        fileList.forEach(itemOne => {\n          this.fileList.some(itemTwo => {\n            // 检测到重复文件 名称相同 && 最后修改时间相同 && 上传ID不相同\n            const isRepeat = itemOne.name === itemTwo.name && itemOne.lastModified === itemTwo.dupid && uploadId !== itemTwo.upid\n            if (isRepeat) { repeatFiles.push(itemOne) }\n            return isRepeat\n          })\n        })\n        // 根据重复类型检测\n        if (this.fileRepeatMode === 1) {\n          // 禁止重复文件(多选模式：本次选择的所有文件，重复文件移除，不重复文件上传)\n          const isRepeat = this.fileList.some(item => {\n            return file.name === item.name && file.lastModified === item.dupid\n          })\n          // 存在重复\n          if (isRepeat) {\n            // 有错误回调\n            if (this.fileRepeatErrorPro) {\n              // 错误回调\n              this.fileRepeatErrorPro(file, fileList, uploadId, repeatFiles)\n            } else {\n              // 有错误文案\n              if (this.fileRepeatError) { this.$message.error(this.fileRepeatError) }\n            }\n            // 不允许上传\n            isOK = !isRepeat\n          }\n        } else if (this.fileRepeatMode === 2) {\n          // 禁止重复文件(多选模式：本次选择的所有文件，有一个存在重复，全部移除)\n          const isRepeat = Boolean(repeatFiles.length)\n          // 存在重复\n          if (isRepeat) {\n            // 有错误回调\n            if (this.fileRepeatErrorPro) {\n              // 错误回调\n              this.fileRepeatErrorPro(file, fileList, uploadId, repeatFiles)\n            } else {\n              // 有错误文案\n              if (this.fileRepeatError) { this.$message.error(this.fileRepeatError) }\n            }\n            // 不允许上传\n            isOK = !isRepeat\n          }\n        }\n      }\n\n      // ----------------------------- 公用检测 - 文件检测 --------\n\n      // 文件检测\n      if (this.fileCheckMode !== 0 && isOK) {\n        // 匹配检测模式\n        if (this.fileCheckMode === 1) {\n          // 本次选择的所有文件，检测失败的移除，成功的上传\n          isOK = this.fileCheck(file, fileList, uploadId)\n        } else if (this.fileCheckMode === 2) {\n          // 本次选择的所有文件，有一个检测失败，全部移除\n          isOK = fileList.every(item => {\n            return this.fileCheck(item, fileList, uploadId)\n          })\n        }\n      }\n\n      // ----------------------------- 组装数据 --------\n\n      // 文件对象\n      const fileJson = {\n        // 唯一标识符\n        uid: file.uid,\n        // 文件名\n        name: file.name,\n        // 文件状态：uploading(上传中)、done(上传成功)、error(上传失败)\n        status: 'uploading',\n        // 防止重复标识\n        dupid: file.lastModified,\n        // 本轮上传ID(上传服务器可剔除)\n        upid: uploadId\n        // 其他自用字段可自行附带\n      }\n\n      // 外传回调\n      if (this.beforeUploadPro) {\n        // 获取回调结果\n        isOK = this.beforeUploadPro(file, fileList, fileJson, isOK) \n      }\n\n      // 检查结果\n      if (isOK) {\n        // 加入文件列表\n        this.fileList.push(fileJson)\n      }\n\n      return isOK\n    },\n    // 自定义上传\n    customRequest (data) {\n      // 找到对应的上传文件对象\n      const fileJson = this.fileList.find(item => {\n        return data.file.uid === item.uid\n      })\n      // 自定义上传服务器\n      if (this.customRequestPro) {\n        // 自定义请求 \n        this.customRequestPro(data, fileJson, (isSuccess) => {\n          const status = isSuccess ? 'done' : 'error'\n          this.customRequestResult(fileJson, status)\n        })\n      } else {\n        // this.$message.error('请自己实现 customRequestPro 自定义上传操作！')\n        // 上传完成\n        setTimeout(() => {\n          this.customRequestResult(fileJson, 'done')\n        }, 2000);\n      }\n    },\n    // 点击移除文件时的回调\n    remove (file) {\n      // 允许删除\n      var isOK = true\n      // 外传回调\n      if (this.removePro) {\n        // 获取回调结果\n        isOK = this.removePro(file) \n      }\n      // 检查结果\n      if (isOK) {\n        const index = this.fileList.indexOf(file)\n        this.fileList.splice(index, 1)\n      }\n      // 返回\n      return isOK\n    },\n    // 文件检测\n    fileCheck (file, fileList, uploadId) {\n\n      // 检测结果\n      var isOK = true\n\n      // ----------------------------- 公用检测 - 文件大小 --------\n      \n      // 开启了 - 文件大小检测\n      if (this.kbCompareMode !== 0) {\n        // 检测结果\n        var isOK = true\n        // 获取文件大小（单位：kb）\n        const fileSize = file.size / 1024\n        // 开始检测\n        if (this.kbCompareMode === 1) {\n          // 小于\n          isOK = fileSize < this.kbCompareSize\n        } else if (this.kbCompareMode === 2) {\n          // 大于\n          isOK = fileSize > this.kbCompareSize\n        } else if (this.kbCompareMode === 3) {\n          // 等于\n          isOK = fileSize === this.kbCompareSize\n        } else if (this.kbCompareMode === 11) {\n          // 小于等于\n          isOK = fileSize <= this.kbCompareSize\n        } else if (this.kbCompareMode === 22) {\n          // 大于等于\n          isOK = fileSize >= this.kbCompareSize\n        } else {}\n        // 判断检测结果\n        if (!isOK) {\n          // 有错误回调\n          if (this.kbCompareErrorPro) {\n            // 错误回调\n            this.kbCompareErrorPro(file, fileList, uploadId)\n          } else {\n            // 有错误文案\n            if (this.kbCompareError) { this.$message.error(this.kbCompareError) }\n          }\n          // 修改检测结果\n          isOK = false\n          // 返回错误状态\n          return isOK\n        }\n      }\n\n      // ----------------------------- 图片检查 --------\n\n      // 返回\n      return isOK\n    },\n    // 自定义上传结果\n    customRequestResult (fileJson, status) {\n      // 设置上传状态\n      fileJson.status = status\n    },\n    // 获取本次上传唯一ID\n    getUploadId (fileList) {\n      var uploadId = ''\n      fileList.forEach(item => {\n        uploadId += item.uid\n      })\n      return uploadId\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>"]}]}